<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3.4. Algorithm Control</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.74.0"><link rel="home" href="index.html" title="Gumtree-Kowari User's Guide"><link rel="up" href="ch03.html" title="Chapter 3. Data Analysis Window"><link rel="prev" href="ch03s03.html" title="3.3. Batch Data Processing and Export"><link rel="next" href="ch03s05.html" title="3.5. Plot"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.4. Algorithm Control</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s03.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Data Analysis Window</th><td width="20%" align="right"> <a accesskey="n" href="ch03s05.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect_ap"></a>3.4. Algorithm Control</h2></div></div></div><p>In this section, you will find information about how to tune the analysis algorithms.
        <a class="xref" href="ch03s04.html#control_block" title="Figure 3.12. Algorithm Control">Figure 3.12, &#8220;Algorithm Control&#8221;</a> shows an overview of the <span class="emphasis"><em>Algorithm
      Control</em></span>.</p><div class="figure"><a name="control_block"></a><p class="title"><b>Figure 3.12. Algorithm Control</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/control_block.PNG" alt="Algorithm Control"></div></div></div><br class="figure-break"><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id387593"></a>3.4.1. How to Change a Parameter</h3></div></div></div><p>There are limited types of graphical widgets in <span class="emphasis"><em>Algorithm Control</em></span>.
        They are checkbox, drop down list, file selection widget, navigation button and mask
        manager. Except for the navigation buttons, all changes to the above widgets need a
        confirmation click on the <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/apply_button.PNG"></span> button. After the file is Analysed and Plotted, the
        <span class="emphasis"><em>Apply</em></span> button is greyed out. Once a change is made to the control
        widgets, the <span class="emphasis"><em>Apply</em></span> button is highlighted. A single clicking on this
        button will apply all the changes made and start Analysis and Plot. Navigation buttons are
        exceptions, they do not need confirmation.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id387637"></a>3.4.2. Use Corrected Data</h3></div></div></div><p>In the NeXus file, the detector count data are accompanied with corrected data, which is
        corrected for count binning artefacts generated by the detector and its electronics. The
        corrected data is produced by the histogram server which uses dithering to balance counts in
        adjacent wires on the detector. By default, uncorrected data is Analysed and Plotted.
        Consult with your instrument scientist if you need to use the corrected data.</p><p>To use the wire corrected data, click to select the checkbox <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/use_correction.PNG"></span>.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="navigation"></a>3.4.3. Navigation Control</h3></div></div></div><p>There are three ways of navigating through the <a class="xref" href="ch03s01.html#frame">Section 3.1.2.1, &#8220;Frame&#8221;</a>frame sequence in
        the NeXus file.</p><div class="itemizedlist"><ul type="disc"><li><p>Use frame index</p><p>The index of each frame will show up in the drop down list in <a class="xref" href="ch03s04.html#jump_to" title="Figure 3.13. Frame Index">Figure 3.13, &#8220;Frame Index&#8221;</a>. Choose the index of a frame that you want to show by a single
            click in the drop down list.</p><div class="figure"><a name="jump_to"></a><p class="title"><b>Figure 3.13. Frame Index</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/jump_to.PNG" alt="Frame Index"></div></div></div><br class="figure-break"></li><li><p>Use navigation buttons <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/nav_button.PNG"></span>. You can navigate backwards or forwards along the frame sequence
            with these buttons.</p></li><li><p>Use scan variable position</p><p>The value of the scan variable for each frame will show up in the drop down list in
              <a class="xref" href="ch03s04.html#scan_variable" title="Figure 3.14. Scan Variable Values">Figure 3.14, &#8220;Scan Variable Values&#8221;</a>. You can choose to show a frame by selecting the scan
            variable value of that frame.</p><div class="figure"><a name="scan_variable"></a><p class="title"><b>Figure 3.14. Scan Variable Values</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/scan_variable.PNG" alt="Scan Variable Values"></div></div></div><br class="figure-break"></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="efficiencyCorrection"></a>3.4.4. Efficiency Correction Control</h3></div></div></div><p>Usually the instrument scientist will prepare the efficiency map of the detector before
        you arrive and put it in your proposal directory. Please consult with your instrument
        scientist for the details of this file. To use the efficiency map file, you can use the
        widgets shown in <a class="xref" href="ch03s04.html#efficiency_control" title="Figure 3.15. Efficiency Correction Control">Figure 3.15, &#8220;Efficiency Correction Control&#8221;</a> to load it. Click on the file
        selection button <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/select_file_button.PNG"></span>, to pop up a file selection window. Once the efficiency map file is
        selected, its path gets inputted into the text box. You can type the path of the file in the
        text box as well.</p><div class="figure"><a name="efficiency_control"></a><p class="title"><b>Figure 3.15. Efficiency Correction Control</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/efficiency_control.PNG" alt="Efficiency Correction Control"></div></div></div><br class="figure-break"><p>You can enable or disable efficiency correction by changing selection of the checkbox.
        Click on the <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/apply_button.PNG"></span> button to apply the change.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id387907"></a>3.4.5. Geometry Correction Control</h3></div></div></div><p>The geometry correction algorithm used in the analysis is to project a flat detector
        histogram onto a spherical surface. Please consult with your instrument scientist if you
        need to apply the geometry correction algorithm. To enable geometry correction, simply click
        to select the checkbox in <a class="xref" href="ch03s04.html#geometry_control" title="Figure 3.16. Geometry Correction Control">Figure 3.16, &#8220;Geometry Correction Control&#8221;</a>. Then click on
          <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/apply_button.PNG"></span> button to apply the change.</p><div class="figure"><a name="geometry_control"></a><p class="title"><b>Figure 3.16. Geometry Correction Control</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/geometry_correction.PNG" alt="Geometry Correction Control"></div></div></div><br class="figure-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id387971"></a>3.4.6. Region of Interest and Masking Control</h3></div></div></div><p>In the analysis algorithm, you can put a series of mask as a single parameter to control
        selection of the detector histogram data. There are two types of masks, inclusive and
        exclusive. Inclusive masks are also called a <span class="emphasis"><em>Region of Interest</em></span>, or
        ROI. If an ROI has been applied to the histogram data, only pixels included in the ROI will
        be considered in the analysis algorithm. Exclusive masks are called masks. If a mask has
        been applied to the histogram data, the pixels in the mask region will not be considered in
        the analysis algorithm.</p><p>There are two ways of inputting ROI or masks into the algorithm. One is to draw regions
        on the two-dimensional intensity plot in the plotting area. The other is to use the
          <span class="emphasis"><em>Masking Properties Window</em></span> to define regions.</p><div class="itemizedlist"><ul type="disc"><li><p>To draw an ROI on the two-dimensional intensity plot, use <span class="bold"><strong>ALT
              + Left Mouse Button</strong></span> combination to draw a rectilinear region on the plot.
            As shown in <a class="xref" href="ch03s04.html#ROI_plot" title="Figure 3.17. ROI on 2D Plot">Figure 3.17, &#8220;ROI on 2D Plot&#8221;</a>, the colour of the ROI is green. To resize the
            ROI, move your mouse to the boarder of the region. The cursor becomes drag-able. You can
            drag the boarder to change the width or the height. To remove, move your mouse onto the
            ROI until the region gets focus. Push the <span class="bold"><strong>DELETE</strong></span> key on
            your keyboard to remove.</p><div class="figure"><a name="ROI_plot"></a><p class="title"><b>Figure 3.17. ROI on 2D Plot</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/2D_mask.PNG" alt="ROI on 2D Plot"></div></div></div><br class="figure-break"></li><li><p>To draw a mask on the two-dimensional intensity plot, use <span class="bold"><strong>SHIFT + ALT + Left Mouse Button</strong></span> combination. The colour of the mask region
            is red. Other properties of the mask are the same as the ROI.</p></li></ul></div><p>You can draw as many ROI and masks on the intensity plot as you like. <a class="xref" href="ch03s04.html#mulit_mask" title="Figure 3.18. Multiple ROI and Masks">Figure 3.18, &#8220;Multiple ROI and Masks&#8221;</a> shows an example of drawing one ROI and two masks on the intensity
        plot.</p><div class="figure"><a name="mulit_mask"></a><p class="title"><b>Figure 3.18. Multiple ROI and Masks</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/3masks.PNG" alt="Multiple ROI and Masks"></div></div></div><br class="figure-break"><p>The other way of apply region selections is to define ROI and mask regions in the
          <span class="emphasis"><em>Masking Properties Window</em></span>. To open this window, click on the
          <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/select_file_button.PNG"></span> button in the algorithm control widget shown in <a class="xref" href="ch03s04.html#mask_control" title="Figure 3.19. ROI and Mask Control">Figure 3.19, &#8220;ROI and Mask Control&#8221;</a>.</p><div class="figure"><a name="mask_control"></a><p class="title"><b>Figure 3.19. ROI and Mask Control</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/mask_control.PNG" alt="ROI and Mask Control"></div></div></div><br class="figure-break"><p><a class="xref" href="ch03s04.html#mask_prop" title="Figure 3.20. Mask Properties Window">Figure 3.20, &#8220;Mask Properties Window&#8221;</a> shows an example of masking properties window.</p><div class="itemizedlist"><ul type="disc"><li><p>To add a new mask, click on the <span class="inlinemediaobject"><img src="kowari.ui.images/SourceView/add_item.gif"></span> button, a new mask item will show up in the <span class="emphasis"><em>Mask
            list</em></span>. You can edit the position and size of the region by changing the
            coordinates of the mask in the <span class="emphasis"><em>Points</em></span> widget. You can define as ROI
            or mask by switching between <span class="emphasis"><em>Inclusive</em></span> and
            <span class="emphasis"><em>Exclusive</em></span> options widget. You need to click on the
            <span class="emphasis"><em>Apply</em></span> button to confirm any change.</p></li><li><p>To change the name of the region, simply type in the <span class="emphasis"><em>Name</em></span> text
            box.</p></li><li><p>To remove a mask, click on the mask item. Then click on the <span class="inlinemediaobject"><img src="kowari.ui.images/SourceView/rem_item.gif"></span> button.</p></li><li><p>To remove all masks, click on the <span class="inlinemediaobject"><img src="kowari.ui.images/SourceView/rem_all_items.gif"></span> button.</p></li><li><p>To save all the masks to a file, click on the <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/mask_save.gif"></span> button. Pick a path and filename, then click on
            <span class="emphasis"><em>SAVE</em></span>. All the masks drawn on the plot will be saved into the file
            in XML format.</p></li><li><p>To load saved masks, click on the <span class="inlinemediaobject"><img src="kowari.ui.images/AlgorithmControl/mask_load.gif"></span> button. Choose a file saved previously, then click
            <span class="emphasis"><em>OPEN</em></span>.</p></li></ul></div><div class="figure"><a name="mask_prop"></a><p class="title"><b>Figure 3.20. Mask Properties Window</b></p><div class="figure-contents"><div class="mediaobject"><img src="kowari.ui.images/AlgorithmControl/mask_property.PNG" alt="Mask Properties Window"></div></div></div><br class="figure-break"><p>The following logic describes how the regions define the selections of the histogram
        data.</p><div class="orderedlist"><ol type="1"><li><p>If there is no ROI or mask region, all pixels in the detector histogram will be
            used.</p></li><li><p>If only masks exist, all pixels but the masked ones will be used.</p></li><li><p>If only ROI exist, only pixels in the ROI regions will be used.</p></li><li><p>If both ROI and masks exist, pixels in the ROI regions but not in the mask will be
            used.</p></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch03s05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.3. Batch Data Processing and Export </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3.5. Plot</td></tr></table></div></body></html>
